---
date: 2021-03-24
title: "STM32F746_TouchGFX_FreeRTOS_1_H/W 분석"
categories: Embedded_FreeRTOS
tags: jekyll
toc: true  
toc_sticky: true 
---

STM32F746_TouchGFX_FreeRTOS_1_H/W 분석
=============

오늘부터 본격적으로 STM32F746 Discovery Kit 사용을 시작하였습니다.    

전에 STM32F407과 마찬가지로 임베디드 시스템 개발에 있어 가장 먼저 해야할 일은 H/W 분석입니다.

H/W 구성에 대한 내용이 정리되어 있다면 개발 및 디버깅에 있어 더 쉽게 접근을 할 수 있습니다.

**최종적으로 STM32F746+TouchGFX+FreeRTOS+Application(DC 모터 PID제어)을 구성하여    
완성하는 것으로 정했습니다.**    

# 1. STM32F746 MCU 분석

STM32F746의 MCU분석은 Datasheet 및 Reference Manual총 2개가 있는데 따로 정리는 하지 않을 것입니다.
(STM32F407과 크게보면 겹치는 부분들이 많아서 그렇습니다. 사용하면서    
F7관련 중요 MCU Spec에 대한 내용이 있다면 추후 내용 추가하겠습니다.)    

[STM32F7_간략정리자료](https://github.com/pus0319/pus0319.github.io/files/6193224/en.brstm32f7.pdf)    

[STM32F74(5)XXX_Reference Manual](https://github.com/pus0319/pus0319.github.io/files/6193232/dm00124865-stm32f75xxx-and-stm32f74xxx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf)    

[STM32F746_Datasheet](https://github.com/pus0319/pus0319.github.io/files/6193240/stm32f746ng.pdf)    


# 2. STM32F746 Discovery Kit 회로도 분석

Discovery Kit의 회로도를 각 Part별로 어떻게 구성되어 있는지 확인해보겠습니다.    

ST사의 F746NGH6-C01의 schematic을 참고하였습니다.    

[en.mb1191-F746NGH6-C01_schematic.pdf](https://github.com/pus0319/pus0319.github.io/files/6193380/en.mb1191-F746NGH6-C01_schematic.pdf)    


## 2.1 ST_LINK_V2-1

임베디드 H/W를 분석하는데 있어서 가장 중요한 것은 **전원** 입니다.    

전원을 어떻게 공급받고 어떻게 만들어서 쓰는지에 대한 분석은 필수 입니다.

Discovery kit의 전원부는 ST_LINK_V2-1(4PAGE)에서 확인할 수 있습니다.    

![image](https://user-images.githubusercontent.com/79636864/112234012-e921b380-8c7e-11eb-8df3-2bb97021f3c4.png)
   

* 기본적으로 ST_LINK_Connector(USB-MINI-B)**<1>** 인 CN14에서 Power Switch IC를 통해 출력하는 5V를 사용할 수 있습니다.
* 추가적으로 JP2 **<3>** 또는 Arduino UNO와 연결하여 입력받는 **<4>** 5V를 사용할 수 있습니다.
* 그외에도 USB OTG FS,HS 쪽 5V도 사용 가능합니다.(주로 사용할 것 같진 않습니다.)
* 최종적으로 **<5>** 에서 어떠한 5V를 사용할 것인지 Jumper로 연결해주면 됩니다.    
  (당연하게도, 여러개의 Jumper를 연결 시, 출력인 5V끼리 연결되는 것과 같기 때문에 H/W가 망가질 수 있습니다.)
* 연결된 5V는 STM32F746과 각종H/W 회로에 공급하는 메인전원인 3.3V 와 1.8V로 Regulate 합니다.
* 그외에도 ST_LINK_V2 동작을 위한 별도 전원 및    
  STM32F746 의 Debugging 및 Download동작을 수행하는 SWD **<7>** 가 있습니다.










